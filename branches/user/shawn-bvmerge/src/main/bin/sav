#!/bin/bash
#
# Savana - Transactional Workspaces for Subversion
# Copyright (C) 2006  Bazaarvoice Inc.
# 
# This file is part of Savana.
#
# This program is free software; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public License
# as published by the Free Software Foundation; either version 3
# of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
#
# Third party components of this software are provided or made available only subject
# to their respective licenses. The relevant components and corresponding
# licenses are listed in the "licenses" directory in this distribution. In any event,
# the disclaimer of warranty and limitation of liability provision in this Agreement
# will apply to all Software in this distribution.

# if the user hasn't set SAVANA_HOME, then we assume it to be the parent of the directory from
# which the "sav" command is run
if [ "$SAVANA_HOME" = "" ]
then
  SAVANA_HOME="`dirname $0`/.."
fi

# add everything in the /lib directory to the classpath
CLASSPATH="$SAVANA_HOME"
for I in $SAVANA_HOME/lib/*.jar
do
  CLASSPATH="$CLASSPATH:$I"
done

# the subcommand is the first argument, everything else is args to the subcommand
SUBCOMMAND="$1" ; shift
java -classpath "$CLASSPATH" -Dsavana.home=$SAVANA_HOME \
    org.codehaus.savana.scripts.SVNScript "$SUBCOMMAND" "$@"

exit